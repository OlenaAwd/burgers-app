{"ast":null,"code":"import _regeneratorRuntime from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dev/Desktop/react-001-starter-files-2021-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Header from\"./Header\";import Order from\"./Order\";import MenuAdmin from\"./MenuAdmin\";import sampleBurgers from\"../sample-burgers\";import Burger from\"./Burger\";import base,{firebaseApp}from\"../base\";import SignIn from\"./Auth/Signin\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={burgers:{},order:{}};_this.addBurger=function(burger){// 1. Делаем копию объекта state\nvar burgers=_objectSpread({},_this.state.burgers);// 2. Добавить новый бургер в переменную burgers\nburgers[\"burger\".concat(Date.now())]=burger;// 3. Записать наш новый объект burgers в state\n_this.setState({burgers:burgers});};_this.updateBurger=function(key,updatedBurger){// 1. Делаем копию объекта state\nvar burgers=_objectSpread({},_this.state.burgers);//2. Обновляем нужный бургер\nburgers[key]=updatedBurger;//3. Записать новый объект Бургер в  state\n_this.setState({burgers:burgers});};_this.deleteBurger=function(key){// 1. Делаем копию объекта state\nvar burgers=_objectSpread({},_this.state.burgers);//2. Удаляем burger\nburgers[key]=null;//3. Записать новый объект Бургер в  state\n_this.setState({burgers:burgers});};_this.loadSampleBurgers=function(){_this.setState({burgers:sampleBurgers});};_this.addToOrder=function(key){// 1. Делаем копию объекта state\nvar order=_objectSpread({},_this.state.order);// 2. Добавить ключ к заказу со знач-ем 1, либо обновить текущ. знач.\norder[key]=order[key]+1||1;// 3. Записать наш новый объект order в state\n_this.setState({order:order});};_this.deleteFromOrder=function(key){// 1. Делаем копию объекта state\nvar order=_objectSpread({},_this.state.order);//2. Удаляем burger\ndelete order[key];// 3. Записать наш новый объект order в state\n_this.setState({order:order});};_this.handleLogOut=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firebaseApp.auth().signOut();case 2:window.location.reload();case 3:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;var localStorageRef=localStorage.getItem(params.restaurantId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.restaurantId,\"/burgers\"),{context:this,state:\"burgers\"});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var params=this.props.match.params;localStorage.setItem(params.restaurantId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(SignIn,null,/*#__PURE__*/React.createElement(\"div\",{className:\"burger-paradise\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{title:\"VERY HOT BURGER\",amount:10,hot:true}),/*#__PURE__*/React.createElement(\"ul\",{className:\"burgers\"},Object.keys(this.state.burgers).map(function(key){return/*#__PURE__*/React.createElement(Burger,{key:key,index:key,addToOrder:_this2.addToOrder,details:_this2.state.burgers[key]});}))),/*#__PURE__*/React.createElement(Order,{burgers:this.state.burgers,order:this.state.order,deleteFromOrder:this.deleteFromOrder}),/*#__PURE__*/React.createElement(MenuAdmin,{addBurger:this.addBurger,loadSampleBurgers:this.loadSampleBurgers,burgers:this.state.burgers,updateBurger:this.updateBurger,deleteBurger:this.deleteBurger,handleLogOut:this.handleLogOut})));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/dev/Desktop/react-001-starter-files-2021-main/src/components/App.js"],"names":["React","Header","Order","MenuAdmin","sampleBurgers","Burger","base","firebaseApp","SignIn","App","state","burgers","order","addBurger","burger","Date","now","setState","updateBurger","key","updatedBurger","deleteBurger","loadSampleBurgers","addToOrder","deleteFromOrder","handleLogOut","auth","signOut","window","location","reload","params","props","match","localStorageRef","localStorage","getItem","restaurantId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Order from \"./Order\";\nimport MenuAdmin from \"./MenuAdmin\";\nimport sampleBurgers from \"../sample-burgers\";\nimport Burger from \"./Burger\";\nimport base, { firebaseApp } from \"../base\";\nimport PropTypes from \"prop-types\";\nimport SignIn from \"./Auth/Signin\";\n\nclass App extends React.Component {\n  static propTypes = {\n    match: PropTypes.object,\n  };\n\n  state = {\n    burgers: {},\n    order: {},\n  };\n\n  componentDidMount() {\n    const { params } = this.props.match;\n    const localStorageRef = localStorage.getItem(params.restaurantId);\n    if (localStorageRef) {\n      this.setState({ order: JSON.parse(localStorageRef) });\n    }\n\n    this.ref = base.syncState(`${params.restaurantId}/burgers`, {\n      context: this,\n      state: \"burgers\",\n    });\n  }\n\n  componentDidUpdate() {\n    const { params } = this.props.match;\n    localStorage.setItem(params.restaurantId, JSON.stringify(this.state.order));\n  }\n\n  componentWillUnmount() {\n    base.removeBinding(this.ref);\n  }\n\n  addBurger = (burger) => {\n    // 1. Делаем копию объекта state\n    const burgers = { ...this.state.burgers };\n    // 2. Добавить новый бургер в переменную burgers\n    burgers[`burger${Date.now()}`] = burger;\n    // 3. Записать наш новый объект burgers в state\n    this.setState({ burgers });\n  };\n\n  updateBurger = (key, updatedBurger) => {\n    // 1. Делаем копию объекта state\n    const burgers = { ...this.state.burgers };\n    //2. Обновляем нужный бургер\n    burgers[key] = updatedBurger;\n    //3. Записать новый объект Бургер в  state\n    this.setState({ burgers });\n  };\n\n  deleteBurger = (key) => {\n    // 1. Делаем копию объекта state\n    const burgers = { ...this.state.burgers };\n    //2. Удаляем burger\n    burgers[key] = null;\n    //3. Записать новый объект Бургер в  state\n    this.setState({ burgers });\n  };\n  loadSampleBurgers = () => {\n    this.setState({ burgers: sampleBurgers });\n  };\n\n  addToOrder = (key) => {\n    // 1. Делаем копию объекта state\n    const order = { ...this.state.order };\n    // 2. Добавить ключ к заказу со знач-ем 1, либо обновить текущ. знач.\n    order[key] = order[key] + 1 || 1;\n    // 3. Записать наш новый объект order в state\n    this.setState({ order });\n  };\n\n  deleteFromOrder = (key) => {\n    // 1. Делаем копию объекта state\n    const order = { ...this.state.order };\n    //2. Удаляем burger\n    delete order[key];\n    // 3. Записать наш новый объект order в state\n    this.setState({ order });\n  };\n\n  handleLogOut = async () => {\n    await firebaseApp.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    return (\n      <SignIn>\n        <div className=\"burger-paradise\">\n          <div>\n            <Header title=\"VERY HOT BURGER\" amount={10} hot={true} />\n            <ul className=\"burgers\">\n              {Object.keys(this.state.burgers).map((key) => {\n                return (\n                  <Burger\n                    key={key}\n                    index={key}\n                    addToOrder={this.addToOrder}\n                    details={this.state.burgers[key]}\n                  />\n                );\n              })}\n            </ul>\n          </div>\n          <Order\n            burgers={this.state.burgers}\n            order={this.state.order}\n            deleteFromOrder={this.deleteFromOrder}\n          />\n          <MenuAdmin\n            addBurger={this.addBurger}\n            loadSampleBurgers={this.loadSampleBurgers}\n            burgers={this.state.burgers}\n            updateBurger={this.updateBurger}\n            deleteBurger={this.deleteBurger}\n            handleLogOut={this.handleLogOut}\n          />\n        </div>\n      </SignIn>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}